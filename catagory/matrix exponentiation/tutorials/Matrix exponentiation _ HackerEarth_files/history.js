var HISTORY_QUEUE=[],DOCUMENT_TITLE="",CLICK_BY_CODE=!1,CODE_STATE_CHANGE=!1,HISTORY_LIST=[],loadHistorySections=function(){var a=window.location.href,b=History.savedStates,c=b[b.length-2].url,d=a.replace(CURRENT_PATH,""),e=c.replace(CURRENT_PATH,""),f=d.split("/");f[f.length-1]==""&&f.pop();var g=e.split("/");g[g.length-1]==""&&g.pop();for(var h=0;h<f.length;h++){var i=f[h],j=g[h];if(i!=j||h==f.length-1){var k=$("#"+i);CLICK_BY_CODE=!0,k.click();break}}},pageLoadHistorySections=function(){if(HISTORY_QUEUE.length>0){var a=HISTORY_QUEUE.shift(),b=$("#"+a);b.length>0&&(CLICK_BY_CODE=!0,b.click(),HISTORY_QUEUE.length>0&&$(document).ajaxStop(function(){var a=HISTORY_QUEUE[0],b=$("#"+a),c=b.attr("id");typeof c!="undefined"&&(CLICK_BY_CODE=!0,b.click(),a=HISTORY_QUEUE.shift())}))}else ID_CLICK_BY_HISTORY&&$("#"+ID_CLICK_BY_HISTORY).click()};$(document).ready(function(){History.Adapter.bind(window,"statechange",function(){var a=History.getState();CODE_STATE_CHANGE||loadHistorySections(),CODE_STATE_CHANGE=!1}),DOCUMENT_TITLE=document.title,HISTORY_LIST=$.parseJSON(HISTORY);if(HISTORY_LIST){for(var a=0;a<HISTORY_LIST.length;a++)CURRENT_PATH=CURRENT_PATH.replace(HISTORY_LIST[a],""),HISTORY_QUEUE.push(HISTORY_LIST[a]);while(CURRENT_PATH[CURRENT_PATH.length-1]==="/"&&CURRENT_PATH[CURRENT_PATH.length-2]==="/")CURRENT_PATH=CURRENT_PATH.substring(0,CURRENT_PATH.length-1)}$(".history").live("click",function(){if(CLICK_BY_CODE){var a=History.getState();CLICK_BY_CODE=!1;return}var b=$(this),c=parseInt(b.attr("level")),d=b.attr("id"),e=b.attr("pushes"),f=window.location.href,g=f.replace(CURRENT_PATH,""),h=g.split("/"),i=[];for(var j=0;j<h.length;j++){var k=h[j];k.length!=0&&i.push(k)}if(e){var l=[];for(var j=1;j<=e;j++)l[j-1]=b.attr("push"+j)}var m=CURRENT_PATH;for(var j=1;j<c;j++)m=m+i[j-1]+"/";e||(m+=d+"/");if(e)for(var j=0;j<l.length;j++)m+=l[j]+"/";CODE_STATE_CHANGE=!0,History.pushState({},DOCUMENT_TITLE,m);return}),pageLoadHistorySections()});