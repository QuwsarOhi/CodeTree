webpackJsonp([1],{"2Ipe":function(e,t,n){"use strict";function o(e){return d[e]}function r(e,t){var n=window.CodePlayer,o=window.setup_video,r=e.problem_slug,a=e.p_type_verbose;o({langs:JSON.stringify(e.langs_info.map(function(e){return e.id})),problem_slug:r,p_type_verbose:a},function(o){if("OK"==o.status){var r=o.lang_code_video_id_map;for(var a in r){var i=r[a].id,l=(0,c.getSessionId)(e,a);i&&(d[l]=new n(i,{animate_save:t})),s(a,e.private_url_hash,l)}}},{})}function a(e){var t=d[e];if(t){return t.finish_recording()}}function i(e,t,n,o){var r=d[e];r&&(r.enqueue_changeset(n,t,o),r.start_recording())}function s(e,t,n){var r=(0,c.getKey)(t,e,"delta"),a=(0,c.getKey)(t,e,"source"),i=(0,c.get_from_local_storage)(r),s=o(n);if(i){s.changeset_queue=s.changeset_queue.concat(i);var l=function(){(0,c.remove_from_local_storage)(r),(0,c.remove_from_local_storage)(a)};s.start_recording(100,l)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCodePlayerForSessionId=o,t.setUpCodePlayers=r,t.codePlayerFinishRecording=a,t.codePlayerEnqueueChangeset=i,t.savePreviousAnonChangeSets=s;var l=n("kX7f"),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n("bInE");window.AceDocument=u.default.acequire("ace/document").Document,window.SessionIdCodePlayerMap={};var d=window.SessionIdCodePlayerMap},A79w:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SubEditor=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("U7vG"),c=o(u),d=n("RH2O"),p=n("famw"),_=o(p),h=n("WJ9Z"),f=n("bInE"),m=n("r6Ka"),g=n("d6GN"),v=n("Gh1z");n("NBbx"),n("RmHk");var y=window.CodeEditorText,b=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.swapShowInput=e._swapShowInput.bind(e),e.onCustomInputChange=e._onCustomInputChange.bind(e),e.onOtherBotUserChange=e._onOtherBotUserChange.bind(e),e.onClickOnSubmit=e._onClickOnSubmit.bind(e),e.onClickOnCompile=e._onClickOnCompile.bind(e),e}return i(t,e),l(t,[{key:"hasStateInitialized",value:function(){return void 0!==this.props.sub_data}},{key:"componentDidMount",value:function(){var e=this;this.hasStateInitialized()||this.props.dispatch(m.actions.initSubEditor(this.props.root)),this.props.is_bot_problem&&this.props.is_authenticated&&jQuery.post(this.props.other_bot_users_url,function(t){e.props.dispatch(m.actions.updateOtherBotUsers(e.props.root,t))})}},{key:"componentWillReceiveProps",value:function(e){this.hasStateInitialized()&&1==this.props.sub_data.fetching_response&&0==e.sub_data.fetching_response&&(this.scroll_to_response=!0)}},{key:"componentDidUpdate",value:function(){if(this.scroll_to_response){this.scroll_to_response=!1;var e=null;if(e=this.props.sub_data.log_response?this.refs.log_response_container:this.refs.sub_response_container)if(this.props.assessment){var t=jQuery(".right-pane");t.animate({scrollTop:t.scrollTop()+jQuery(e).offset().top-t.offset().top-20},500,"linear")}else{var n=jQuery(e).closest(".code-editor-scroll-container");n.length>0?n.animate({scrollTop:jQuery(e).offset().top-20},500,"linear"):jQuery("body,html").animate({scrollTop:jQuery(e).offset().top-20},500,"linear")}}}},{key:"_swapShowInput",value:function(){this.props.dispatch(m.actions.swapShowInput(this.props.root))}},{key:"_onCustomInputChange",value:function(e){this.props.dispatch(m.actions.customInputChange(this.props.root,e.target.value))}},{key:"_onOtherBotUserChange",value:function(e){this.props.dispatch(m.actions.otherBotUserIdChange(this.props.root,e&&e.value))}},{key:"poll",value:function(e,t){var n=this;jQuery.post(e,function(o){n.props.dispatch(m.actions.fetchResponseSuccess(n.props.root,o,t)),(0,g.shouldPoll)(o)&&(n.poll_timeout=setTimeout(n.poll.bind(n,e,t),1e3))})}},{key:"_onClickOnCompile",value:function(){var e=this,t=this.props,n=t.root,o=t.sub_data,r=t.root_data,a=t.problem_slug,i=t.private_url_hash,s=t.p_type_verbose,l=t.dryrun_url;if(t.is_authenticated){var u=(0,f.getSourceData)(r),c=l,d={source:u.source,lang:r.current_lang,changeset_timestamp:u.last_edited,problem_slug:a,private_hash:i,input:o.input_text,p_type_v:s};this.fetchResponse(n,c,d,!0,function(t,n){return e.poll.bind(e,t,n)})}else(0,f.showLoginModal)()}},{key:"_onClickOnSubmit",value:function(){var e=this,t=this.props,n=t.root,o=t.root_data,r=t.problem_slug,a=t.private_url_hash,i=t.p_type_verbose,s=t.submit_url,l=t.is_authenticated,u=t.is_bot_problem;if(l){var c=(0,f.getSourceData)(o),d=s,p={source:c.source,lang:o.current_lang,changeset_timestamp:c.last_edited,problem_slug:r,private_hash:a,problem_type:i};if(u){var _=this.props.sub_data.current_other_bot_user_id;-1==_&&(_=0),p.user_id=_}this.fetchResponse(n,d,p,!1,function(t,n){return e.poll.bind(e,t,n)})}else(0,f.showLoginModal)()}},{key:"fetchResponse",value:function(e,t,n,o,r){var a=this;this.props.dispatch(m.actions.fetchResponse(e,o)),this.props.submission_source&&(n=s({},n,{submission_source:this.props.submission_source})),this.poll_timeout&&clearTimeout(this.poll_timeout),jQuery.ajax({type:"POST",url:t,data:n,dataType:"text"}).done(function(t){var n=JSON.parse(t);console.log("compile or submit"),a.props.dispatch(m.actions.fetchResponseSuccess(e,n.html,o)),(0,g.shouldPoll)(n.html)&&n.url&&(a.poll_timeout=setTimeout(r(n.url,o),1e3))})}},{key:"render",value:function(){if(!this.hasStateInitialized())return null;var e=this.props,t=e.sub_data,n=e.root_data,o=!1;n&&null!==n.current_lang&&!t.fetching_response&&(o=!0);var r=!0;!0===this.props.disable_custom_input&&(r=!1);var a="custom-input-trigger-"+this.props.private_url_hash,i="compile-test-button-"+this.props.private_url_hash,s="submit-button-"+this.props.private_url_hash,l=this.props,u=l.problem_id,d=l.problem_slug,p=l.p_type,f=l.p_type_verbose,m=l.private_url_hash,g=l.langs_info,b=l.langs_code_ajax_url,C=l.last_lang,E=l.is_authenticated,S=l.disable_paste,T=l.assessment,O=l.fav_lang,P=l.fav_lang_ajax_url,k=l.default_template_ajax_url,w=l.LAB_FL,R=l.LAB_FC,I=l.editor_theme,N=l.editor_min_lines,A=l.editor_max_lines,L=l.is_bot_problem,D="sub-editor new-submission-container-"+this.props.private_url_hash;T&&(D+=" assessment-sub-editor"),n&&n.is_full_screen&&(D+=" fullscreen-editor");var M=this.props.sub_data.other_bot_users.map(function(e){return{value:e.id,label:e.name}}),x=this.props.sub_data.current_other_bot_user_id;return c.default.createElement("div",{className:D},c.default.createElement(h.CodeEditor,{problem_id:u,problem_slug:d,p_type:p,p_type_verbose:f,private_url_hash:m,langs_info:g,langs_code_ajax_url:b,last_lang:C,is_authenticated:E,disable_paste:S,assessment:T,fav_lang:O,fav_lang_ajax_url:P,default_template_ajax_url:k,LAB_FL:w,LAB_FC:R,editor_theme:I,onClickOnSubmit:this.onClickOnSubmit,editor_min_lines:N,editor_max_lines:A}),c.default.createElement("div",{className:"sub-editor-footer"},[c.default.createElement("div",{className:"autocomplete-suggestion",key:"autocomplete-suggestion"},c.default.createElement("div",{className:"float-right light content autocomplete-text"},c.default.createElement("i",{className:"fa fa-lightbulb-o fa-orange"}),c.default.createElement("span",{className:"livecomplete-lab-flag-react"}," ",y.autoCompleteInfo))),o&&r&&!L?c.default.createElement("div",{className:"custom-input-container",key:"custom-input-container"},c.default.createElement("a",{id:a,className:"provide-custom-input-trigger regular inline-block",onClick:this.swapShowInput},c.default.createElement("i",{className:"fa fa-caret-square-o-"+(t.show_input?"up":"down")})," ",y.provideCustomInput),t.show_input?c.default.createElement("textarea",{className:"custom-input nice-textarea",value:t.input_text,onChange:this.onCustomInputChange}):null):null,o&&!L?c.default.createElement("div",{is:!0,class:"sub-editor-buttons-container","private-url-hash":this.props.private_url_hash,key:"sub-editor-buttons-container"},c.default.createElement("button",{id:i,className:"compile-test-button button btn-blue",key:"compile-test-button",onClick:this.onClickOnCompile}," ",p==v.P_TYPE_SQL?y.compileSubmitForSQL:y.compileSubmit," "),c.default.createElement("button",{id:s,className:"submit-button button btn-green",key:"submit-button",onClick:this.onClickOnSubmit}," ",y.submit," ")):null,o&&L?c.default.createElement("div",{is:!0,class:"sub-editor-buttons-container","private-url-hash":this.props.private_url_hash,key:"sub-editor-buttons-container"},c.default.createElement(_.default,{className:"other-bot-user-select",autosize:!0,options:M,value:x,onChange:this.onOtherBotUserChange}),c.default.createElement("button",{id:s,className:"submit-button button play-game-button "+(null===x?"btn-inactive":"btn-blue"),key:"submit-button",onClick:this.onClickOnSubmit,disabled:null===x}," ",y.playText," ")):null,c.default.createElement("div",{className:"clear",key:"clear1"}),t.fetching_response?c.default.createElement("div",{className:"dots-loader ajax-loader",key:"loader"}):null,t.sub_response?c.default.createElement("div",{className:"standard-margin submission-container",key:"sub-response",ref:"sub_response_container",dangerouslySetInnerHTML:{__html:t.sub_response}}):null,t.log_response?c.default.createElement("div",{className:"standard-margin submission-container",key:"log-response",ref:"log_response_container",dangerouslySetInnerHTML:{__html:t.log_response}}):null,c.default.createElement("div",{className:"clear",key:"clear2"})]))}}]),t}(c.default.PureComponent),C=function(e,t){var n=(0,f.getRoot)(t.p_type,t.problem_id);return{root:n,sub_data:e.sub_editors[n],root_data:e.code_editor.roots[n]}};t.SubEditor=(0,d.connect)(C)(b)},Gh1z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.P_TYPE_SQL="q"},H2Zf:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=(0,d.createStore)(P,O,k);u.default.render(s.default.createElement(c.Provider,{store:n},s.default.createElement(h.SubEditor,t)),document.getElementById(e))}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n("U7vG"),s=o(i),l=n("O27J"),u=o(l),c=n("RH2O"),d=n("2KeS"),p=n("po9w"),_=o(p),h=n("A79w"),f=n("Mlu2"),m=o(f),g=n("Q9e5"),v=o(g),y=n("ncZi"),b=n("zp53"),C=o(b),E=n("XGVg"),S=o(E),T=n("r6Ka"),O=a({},m.default,C.default),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1];return t.type in y.ActionType?a({},e,{code_editor:(0,v.default)(e.code_editor,t)}):t.type in T.ActionType?a({},e,{sub_editors:(0,S.default)(e.sub_editors,t)}):e},k=(0,d.applyMiddleware)(_.default);window.renderSubEditor=r},Mlu2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={code_editor:{global_conf:{loaded:!1},roots:{}}}},NBbx:function(e,t){},Q9e5:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){switch(t.type){case i.ActionType.INIT_CODE_EDITOR:for(var n=t.root,r=t.data,d=r.langs_info,p={},_=0;_<d.length;_++){p[d[_].id]={source:null,whole_source:null,last_edited:null,cursor_pos:{row:0,col:0},readonly_ranges:[]}}var h=e.global_conf;return e.global_conf.loaded||(h=a({},e.global_conf,{loaded:!0,current_keybindings:(0,c.get_last_keybindings)(),fav_lang:r.fav_lang,current_code_editor_theme:(0,c.get_last_code_editor_theme)()})),a({},e,{global_conf:h,roots:a({},e.roots,o({},n,a({},r,{current_lang:null,lang_source_map:p})))});case i.ActionType.SET_SOURCE_IN_CODE_EDITOR:for(var f=t.root,m=t.data,g=t.animate_save,v=a({},e.roots[f].lang_source_map),y=0;y<m.length;y++){var b=m[y],C=(0,c.getKey)(e.roots[f].private_url_hash,b.lang,"source"),E=(0,c.get_from_local_storage)(C);E&&(b.source=E.source),v[b.lang]=a({},v[b.lang],{source:(0,c.get_source_and_readonly_ranges)(b.source||"",[]),whole_source:b.source||"",last_edited:b.last_edited})}e=a({},e,{roots:a({},e.roots,o({},f,a({},e.roots[f],{lang_source_map:v})))}),e.roots[f].current_lang=(0,c.get_last_lang)(e.roots[f],e.global_conf);var S=e.roots[f];return S.is_authenticated&&(0,s.setUpCodePlayers)(S,g),e;case i.ActionType.CHANGE_SOURCE_IN_CODE_EDITOR:var T=t.root,O=t.source,P=t.delta,k=e.roots[T],w=k.lang_source_map,R=k.current_lang,I=w[R].whole_source,N=(0,c.getSessionId)(k,R);if(w=a({},w,o({},R,a({},w[R],{source:O,whole_source:(0,c.applyReadonlyRangesToSource)(O,(0,l.getOrCreateReadonlyRanges)(N)),last_edited:(new Date).getTime()}))),e=a({},e,{roots:a({},e.roots,o({},T,a({},e.roots[T],{lang_source_map:w})))}),k.is_authenticated){var A=(0,l.getOrCreateReadonlyRanges)(N);(0,s.codePlayerEnqueueChangeset)(N,I,P,(0,c.cloneReadonlyRanges)(A))}else{var L=(0,c.getKey)(k.private_url_hash,R,"delta"),D=(0,c.getKey)(k.private_url_hash,R,"source"),M=(0,c.getKey)(k.private_url_hash,"","lang"),x=(0,c.get_from_local_storage)(L),U={delta:P,source:O,timestamp:(new Date).getTime()};x?x.push(U):x=[U],(0,c.set_to_local_storage)(L,x);var H={source:O,lang:R,last_edited:(new Date).getTime()};(0,c.set_to_local_storage)(D,H),(0,c.set_to_local_storage)(M,R)}return e;case i.ActionType.CHANGE_CURRENT_LANG_IN_CODE_EDITOR:var j=t.root,F=t.lang;return a({},e,{roots:a({},e.roots,o({},j,a({},e.roots[j],{current_lang:F})))});case i.ActionType.CHANGE_CURRENT_KEYBINDINGS:var B=t.keybindings;return(0,c.set_to_local_storage)("keybindings",B),a({},e,{global_conf:a({},e.global_conf,{current_keybindings:B})});case i.ActionType.CHANGE_FAVORITE_LANG_IN_CODE_EDITOR:var G=t.fav_lang;return a({},e,{global_conf:a({},e.global_conf,{fav_lang:G})});case i.ActionType.SET_CURSOR_POSITION:var V=t.root,K=t.row,Q=t.col,z={row:K,col:Q},q=e.roots[V],$=q.current_lang,W=q.lang_source_map;return W=a({},W,o({},$,a({},W[$],{cursor_pos:z}))),a({},e,{roots:a({},e.roots,o({},V,a({},e.roots[V],{lang_source_map:W})))});case i.ActionType.CHANGE_FULL_SCREEN_MODE:var J=t.root,Y=t.is_full_screen;return a({},e,{roots:a({},e.roots,o({},J,a({},e.roots[J],{is_full_screen:Y})))});case i.ActionType.CHANGE_CURRENT_THEME_IN_CODE_EDITOR:var X=t.code_editor_theme;return(0,c.set_to_local_storage)(u.CODE_EDITOR_THEME_TOKEN,X),a({},e,{global_conf:a({},e.global_conf,{current_code_editor_theme:X})})}return e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=r;var i=n("ncZi"),s=n("2Ipe"),l=n("yqcu"),u=n("yUpC"),c=n("bInE")},WJ9Z:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEditor=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("vMAF"),u=o(l),c=n("U7vG"),d=o(c),p=n("RH2O"),_=n("cnj4"),h=o(_);n("kX7f"),n("R3yc"),n("y1DZ"),n("eKfU"),n("wnqS"),n("LH9O"),n("MSRa"),n("a80F");var f=n("yUpC"),m=n("s0pV"),g=n("ncZi"),v=n("bInE"),y=n("2Ipe"),b=n("yqcu"),C=n("cuEl"),E=window.CodeEditorText,S=(0,u.default)({FILE_UPLOAD_INIT:null,EDITOR_CODE_PASTE_INIT:null,EDITOR_CODE_PASTE_WAIT:null,EDITOR_CODE_AFTER_PASTE:null}),T=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSourceChange=e._onSourceChange.bind(e),e.onLangChange=e._onLangChange.bind(e),e.onThemeChange=e._onThemeChange.bind(e),e.onClickOnSave=e._onClickOnSave.bind(e),e.onCut=e._onCut.bind(e),e.onCopy=e._onCopy.bind(e),e.onPaste=e._onPaste.bind(e),e.onEditorCreation=e._onEditorCreation.bind(e),e.onSessionCreation=e._onSessionCreation.bind(e),e.onDocumentCreation=e._onDocumentCreation.bind(e),e.keyboardHandlerFunction=e._keyboardHandlerFunction.bind(e),e.onChangeKeybindingsForNormal=e._onChangeKeybindings.bind(e,null),e.onChangeKeybindingsForVim=e._onChangeKeybindings.bind(e,"vim"),e.onChangeKeybindingsForEmacs=e._onChangeKeybindings.bind(e,"emacs"),e.set_fav_lang=e._set_fav_lang.bind(e),e.set_default_template=e._set_default_template.bind(e),e.toggle_expand_box=e._toggle_expand_box.bind(e),e.onClickOnSettingButton=e._onClickOnSettingButton.bind(e),e.onCursorChange=e._onCursorChange.bind(e),e.onVimModeChange=e._onVimModeChange.bind(e),e.onUnload=e._onUnload.bind(e),e.handleFullScreenClick=e._handleFullScreenClick.bind(e),e.stopPropagationPreventDefault=e._stopPropagationPreventDefault.bind(e),e.aceCommands=[{name:"saveCode",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor|cli"},exec:function(){e.onClickOnSave()}}],e.codefileUpload=e._codefileUpload.bind(e),e.openCodeFile=e._openCodeFile.bind(e),e.onLangChangeOnUpload=e._onLangChangeOnUpload.bind(e),e.codeFileSubmit=e._codeFileSubmit.bind(e),e.codeFileEdit=e._codeFileEdit.bind(e),e.fileUploadModalClose=e._fileUploadModalClose.bind(e),e.state={is_open_expand_box:!1,vim_mode:"normal",file_upload_state:null,code_file:null,code_file_lang:null,show_file_upload_modal:!1,submitCode:!1},e}return i(t,e),s(t,[{key:"_onUnload",value:function(e){var t=this.getCurrentSessionId(),n=(0,y.getCodePlayerForSessionId)(t);n&&n.is_recording_code_player&&(e.returnValue="You may loose all the unsaved changes!")}},{key:"_stopPropagationPreventDefault",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.root,o=t.problem_id,r=t.problem_slug,a=t.p_type,i=t.p_type_verbose,s=t.private_url_hash,l=t.is_authenticated,u=t.langs_info,c=t.langs_code_ajax_url,d=t.last_lang,p=t.fav_lang,_=t.fav_lang_ajax_url,h=t.default_template_ajax_url,f=t.LAB_FL,m=t.LAB_FC,v=t.root_data;v&&v.is_full_screen&&jQuery(".problem-description").addClass("fullscreen-problem-description");var y=u.map(function(e){return e.id}).join(",");if(this.hasStateInitialized()||this.props.dispatch(g.actions.initCodeEditor(n,{problem_id:o,problem_slug:r,p_type:a,p_type_verbose:i,private_url_hash:s,is_authenticated:l,langs_info:u,last_lang:d,fav_lang:p,fav_lang_ajax_url:_,default_template_ajax_url:h,LAB_FL:f,LAB_FC:m})),this.isSourceLoaded()||jQuery.get(c,{langs:y},function(t){e.props.dispatch(g.actions.setSourceInCodeEditor(n,t.data,e.animateSave.bind(e)))}),document.addEventListener("click",this.toggle_expand_box,!1),window.addEventListener("beforeunload",this.onUnload),this.props.disable_paste){var b="code-editor-"+s,C=document.getElementById(b);C&&(C.addEventListener("copy",this.stopPropagationPreventDefault,!0),C.addEventListener("cut",this.stopPropagationPreventDefault,!0))}}},{key:"componentWillUnmount",value:function(){if(document.removeEventListener("click",this.toggle_expand_box,!1),window.removeEventListener("beforeunload",this.onUnload),this.props.disable_paste){var e="code-editor-"+this.props.private_url_hash,t=document.getElementById(e);t&&(t.removeEventListener("copy",this.stopPropagationPreventDefault),t.removeEventListener("cut",this.stopPropagationPreventDefault))}}},{key:"hasStateInitialized",value:function(){return void 0!==this.props.root_data}},{key:"isSourceLoaded",value:function(){return!!this.hasStateInitialized()&&null!==this.props.root_data.current_lang}},{key:"getCurrentLang",value:function(){return this.hasStateInitialized()?this.props.root_data.current_lang:null}},{key:"getCurrentLangName",value:function(){if(!this.hasStateInitialized())return null;for(var e=this.getCurrentLang(),t=0;t<this.props.langs_info.length;t++)if(this.props.langs_info[t].id==e)return this.props.langs_info[t].name}},{key:"getCurrentSource",value:function(){if(!this.isSourceLoaded())return"";var e=this.props.root_data;return e.lang_source_map[e.current_lang].source}},{key:"getCurrentWholeSource",value:function(){if(!this.isSourceLoaded())return"";var e=this.props.root_data;return e.lang_source_map[e.current_lang].whole_source}},{key:"getCurrentSessionId",value:function(){var e=this.props.root,t=this.getCurrentLang();return t?e+"-"+t:"default"}},{key:"getCurrentKeybindings",value:function(){return this.hasStateInitialized()?this.props.global_conf.current_keybindings:null}},{key:"getCurrentReadonlyRanges",value:function(){return(0,b.getOrCreateReadonlyRanges)(this.getCurrentSessionId())}},{key:"animateSave",value:function(e){var t=jQuery(this.refs.saveLink);!0===e?(t.html(E.savedText),t.css({"background-color":"yellow"}),t.animate({backgroundColor:"#e5e7e8"},1e3,function(){t.css("background-color","rgba(0, 0, 0, 0)")})):t.html(E.errorInSavingText),setTimeout(function(){t.fadeIn().html(E.saveText).fadeIn()},1e3)}},{key:"setUpReadonlyRangesOnDoc",value:function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.start=e.createAnchor(o.start),o.end=e.createAnchor(o.end),o.end.$insertRight=!0}}},{key:"setUpReadonlyRangesOnSession",value:function(e,t){for(var n=0;n<t.length;n++){var o=t[n];e.addMarker(o,"ace-readonly-highlight")}}},{key:"does_selection_intersect",value:function(e,t){for(var n=this.refs.ace_editor.getSelectionRange(),o=0;o<e.length;o++){var r=e[o];if((t||n.start.row!=r.end.row||n.start.column!=r.end.column)&&n.intersects(r))return!0}return!1}},{key:"getCursorPosition",value:function(){if(this.isSourceLoaded()){var e=this.props.root_data;return e.lang_source_map[e.current_lang].cursor_pos}return{col:0,row:0}}},{key:"getCurrentTheme",value:function(){return this.props.global_conf.current_code_editor_theme||this.props.editor_theme||f.DEFAULT_CODE_EDITOR_THEME}},{key:"_onSourceChange",value:function(e,t){this.props.dispatch(g.actions.changeSourceInCodeEditor(this.props.root,e,t))}},{key:"_onLangChange",value:function(e){var t=e.target.value;this.props.dispatch(g.actions.changeCurrentLangInCodeEditor(this.props.root,t))}},{key:"_onThemeChange",value:function(e){this.setState({is_open_expand_box:!1}),this.refs.ace_editor.focus(),this.props.dispatch(g.actions.changeCurrentThemeInCodeEditor(this.props.root,e))}},{key:"_onCursorChange",value:function(e,t){this.props.dispatch(g.actions.setCursorPosition(this.props.root,e,t))}},{key:"_onVimModeChange",value:function(e){this.setState({vim_mode:e})}},{key:"_onClickOnSave",value:function(){if(this.isSourceLoaded()){var e=this.getCurrentSessionId();(0,y.codePlayerFinishRecording)(e)||this.animateSave(!0)}}},{key:"_onCut",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onCopy",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onPaste",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onEditorCreation",value:function(e){for(var t=["backspace","del","indent"],n=this,o=0;o<t.length;o++){var r=t[o],a=e.commands.byName[r];!function(t){e.commands.addCommand({name:t.name,bindKey:t.bindKey,exec:function(e){if(!n.does_selection_intersect(n.getCurrentReadonlyRanges(),"backspace"==t.name)&&("del"!=t.name||n.can_delete(!1,!1)))return t.exec.call(this,e)}})}(a)}}},{key:"can_delete",value:function(e,t){var n=this.refs.ace_editor.editor.getSelectionRange(),o=n.end.row,r=n.end.column,a=this.refs.ace_editor.editor.getSession().getValue().split("\n"),i=a[o],s=i.slice(r);if(/^\r?$/.test(s)||e)for(var l=this.getCurrentReadonlyRanges(),u=0;u<l.length;u++){var c=l[u];if(!t&&c.start.row==o+1)return!1;if(t&&c.end.row==o){if(o+1==a.length)return!1;if(l.some(function(e){return e.start.row==o+1}))return!1}}return!0}},{key:"_onDocumentCreation",value:function(e,t){this.setUpReadonlyRangesOnDoc(t,(0,b.getOrCreateReadonlyRanges)(e))}},{key:"_onSessionCreation",value:function(e,t){this.setUpReadonlyRangesOnSession(t,(0,b.getOrCreateReadonlyRanges)(e));var n=e.split("-");if(n.length>1){var o=n[n.length-1];t.lang=o}}},{key:"_keyboardHandlerFunction",value:function(e,t,n,o){if("vim"==this.getCurrentKeybindings()&&"insert"!=this.state.vim_mode){var r=String.fromCharCode(o);return("normal"==this.state.vim_mode&&"d"==r||"D"==r)&&!(!this.does_selection_intersect(this.getCurrentReadonlyRanges(),!1)&&this.can_delete(!0,!0))&&{command:"null",passEvent:!1}}return!(-1===t||o<=40&&o>=37)&&(this.does_selection_intersect(this.getCurrentReadonlyRanges(),!1)?{command:"null",passEvent:!1}:void 0)}},{key:"_onClickOnSettingButton",value:function(e){this.state.is_open_expand_box||(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.setState({is_open_expand_box:!0}))}},{key:"_toggle_expand_box",value:function(e){this.state.is_open_expand_box&&!jQuery.contains(this.refs.expand_box,e.target)&&this.setState({is_open_expand_box:!1})}},{key:"_onChangeKeybindings",value:function(e){this.props.dispatch(g.actions.changeCurrentKeybindings(this.props.root,e)),this.setState({is_open_expand_box:!1}),this.refs.ace_editor.focus(),this.setState({vim_mode:"normal"})}},{key:"_set_fav_lang",value:function(){var e=this,t=this.getCurrentLangName();jQuery.ajax({type:"POST",url:this.props.fav_lang_ajax_url,data:{lang:t}}).done(function(n){"OK"==n.status&&(window.addAlert(n.message),e.props.dispatch(g.actions.changeFavoriteLang(e.props.root,t)))}),this.setState({is_open_expand_box:!1})}},{key:"_set_default_template",value:function(){var e={code:this.getCurrentSource(),lang:this.getCurrentLang(),confirm:"confirm"};jQuery.ajax({type:"POST",url:this.props.default_template_ajax_url,data:e}).done(function(e){"confirm"==e.status?this.refs.confirm_set_favorite_code.click():"OK"==e.status&&window.addAlert(e.message)}),this.setState({is_open_expand_box:!1})}},{key:"_change_vim_mode",value:function(){}},{key:"componentDidUpdate",value:function(){switch(this.state.file_upload_state){case S.FILE_UPLOAD_INIT:this.setFileInState();break;case S.EDITOR_CODE_PASTE_INIT:this.setCodeInEditor();break;case S.EDITOR_CODE_AFTER_PASTE:this.afterCodePaste()}return!0}},{key:"_openCodeFile",value:function(){if(this.props.is_authenticated){if(!this.isSourceLoaded())return;this.refs.codeFile.click()}else(0,v.showLoginModal)()}},{key:"_codefileUpload",value:function(){this.setState({file_upload_state:S.FILE_UPLOAD_INIT,show_file_upload_modal:!0,code_file_lang:this.getCurrentLang()})}},{key:"_onLangChangeOnUpload",value:function(e){var t=e.target.value;return this.setState({code_file_lang:t}),!0}},{key:"_codeFileEdit",value:function(){this.setState({file_upload_state:S.EDITOR_CODE_PASTE_INIT})}},{key:"_codeFileSubmit",value:function(){this.setState({file_upload_state:S.EDITOR_CODE_PASTE_INIT,submitCode:!0})}},{key:"setFileInState",value:function(){var e=this.refs.codeFile,t=e.files[0],n=(0,v.getLangForFilePath)(t.name);return n&&(0,v.isLangAllowed)(n,this.props.root_data.langs_info)||(n=this.getCurrentLang()),this.setState({code_file:t,code_file_lang:n}),!0}},{key:"setCodeInEditor",value:function(){var e=this;this.props.dispatch(g.actions.changeCurrentLangInCodeEditor(this.props.root,this.state.code_file_lang));var t="",n=new FileReader;n.onload=function(){t=n.result,e.refs.ace_editor.setValue(t),e.setState({file_upload_state:S.EDITOR_CODE_AFTER_PASTE})},n.readAsText(this.state.code_file),this.setState({file_upload_state:S.EDITOR_CODE_PASTE_WAIT})}},{key:"afterCodePaste",value:function(){this.state.submitCode&&this.props.onClickOnSubmit(),this.fileUploadModalClose(),this.refs.codeFile.value=""}},{key:"_fileUploadModalClose",value:function(){this.setState({file_upload_state:null,code_file:null,code_file_lang:null,show_file_upload_modal:!1,submitCode:!1})}},{key:"_handleFullScreenClick",value:function(){var e=this.props.root_data;e&&e.is_full_screen?this._restore():this._fullScreen(),this.props.dispatch(g.actions.toggleFullScreenMode(this.props.root,!e.is_full_screen)),this.setState({is_open_expand_box:!1})}},{key:"_fullScreen",value:function(){var e=this.props.assessment,t=this;jQuery("body").addClass("disable-vertical-scroll"),jQuery(".problem-description").addClass("fullscreen-problem-description"),jQuery("#fullscreen-problem-title").removeClass("hidden"),jQuery(window).resize(function(){e&&jQuery(".assessment-sub-editor").hasClass("fullscreen-editor")&&t._handleAssessmentEditorHeight(!1)}),e&&t._handleAssessmentEditorHeight(!1),h.default.unbind("backspace"),h.default.on("backspace",null,function(){"TEXTAREA"!==document.activeElement.tagName&&t.handleFullScreenClick()}),h.default.on("esc",null,function(){t.handleFullScreenClick()})}},{key:"_restore",value:function(){var e=this.props.assessment;jQuery("body").removeClass("disable-vertical-scroll"),jQuery(".problem-description").removeClass("fullscreen-problem-description"),jQuery("#fullscreen-problem-title").addClass("hidden"),e&&this._handleAssessmentEditorHeight(!0),h.default.unbind("backspace"),h.default.unbind("esc")}},{key:"_handleAssessmentEditorHeight",value:function(e){if(e)jQuery(".assessment-sub-editor").css("height",""),jQuery(".assessment-problem-description").css("height","");else{var t=jQuery(window).height()-jQuery(".header").outerHeight();jQuery(".assessment-sub-editor").css("height",t),jQuery(".assessment-problem-description").css("height",t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.langs_info,o=t.LAB_FL,r=t.LAB_FC,a=t.assessment,i=t.root_data,s=this.isSourceLoaded(),l=this.getCurrentLang(),u=this.getCurrentLangName(),c=this.getCurrentSessionId(),p=this.getCurrentKeybindings(),_=this.getCursorPosition(),h=this.state.code_file_lang,g=this.getCurrentTheme(),y="";"insert"==this.state.vim_mode&&(y=" (Insert)");var S="setting-expand-box less-margin "+(this.state.is_open_expand_box?"block":"hidden"),T=null;r&&!a&&(T=d.default.createElement("a",{className:"set-favorite-code",onClick:this.set_default_template},d.default.createElement("li",null,E.setDefaultTemplateText)));var O=null;o&&(O=d.default.createElement("a",{className:"set-favorite-lang",onClick:this.set_fav_lang},d.default.createElement("li",null,E.setFavoriteLangText.format(u))));var P=[],k=this.getCurrentSource();if(s){var w={};if(P=(0,b.getOrCreateReadonlyRanges)(c,w),w.created){var R=this.getCurrentWholeSource();k=(0,v.get_source_and_readonly_ranges)(R,P)}}var I="fa fa-expand",N=E.goFullScreen;i&&i.is_full_screen&&(I="fa fa-compress",N=E.exitFullScreen);var A="code-editor-"+this.props.private_url_hash,L="editor-lang-select-"+this.props.private_url_hash,D="editor-save-trigger-"+this.props.private_url_hash;return d.default.createElement("div",{id:A,className:"code-editor"},d.default.createElement("div",{className:"editor-header"},a?null:d.default.createElement("span",{className:"file-upload-text light regular",dangerouslySetInnerHTML:{__html:E.writeOrUploadCode},onClick:this.openCodeFile}),d.default.createElement("div",{className:"hidden"},d.default.createElement("input",{type:"file",id:"codeFile",ref:"codeFile",onChange:this.codefileUpload,readOnly:!s})),d.default.createElement("div",{className:this.state.show_file_upload_modal?"":"hidden"},d.default.createElement("div",{className:"react-modal-overlay"},d.default.createElement("div",{className:"react-modal-container small-modal"},d.default.createElement("a",{className:"modal-close no-underline",title:"Close",onClick:this.fileUploadModalClose}),d.default.createElement("div",{className:"modal-header"},d.default.createElement("h4",{className:"dark large less-margin"},E.selectLanguageText)),d.default.createElement("hr",{className:"hr"}),d.default.createElement("div",{className:"modal-content"},d.default.createElement("div",{className:"light regular less-margin"},E.helpText),d.default.createElement("select",{className:" float-left nice-select",value:h||"lang",onChange:this.onLangChangeOnUpload.bind(this)},s?n.map(function(e){return d.default.createElement("option",{value:e.id,key:e.id},e.versioned_name)}):[d.default.createElement("option",{value:"lang",key:"lang"},E.SelectLanguage)])),d.default.createElement("div",{className:"modal-footer"},d.default.createElement("a",{className:"button btn-blue float-right close-modal-window edit-code",onClick:this.codeFileEdit.bind(this)},E.editText),d.default.createElement("a",{className:"float-right button btn-blue close-modal-window submit-code medium-margin-right",onClick:this.codeFileSubmit.bind(this)},E.submitText),d.default.createElement("div",{className:"clear"}))))),d.default.createElement("div",{className:"mobile-clear"}),d.default.createElement("div",{className:"editor-settings-button-container float-right"},d.default.createElement("div",{className:"editor-settings-button",onClick:this.onClickOnSettingButton},d.default.createElement("i",{className:"fa fa-cog"})),d.default.createElement("div",{className:"clear"}),d.default.createElement("div",{className:S,ref:"expand_box"},d.default.createElement("div",{className:"down-arrow"}),d.default.createElement("ul",{className:"no-margin"},d.default.createElement("div",{className:"medium-margin-left editor-options"},d.default.createElement("p",{className:"smaller weight-600 no-margin"},E.themeHeader),f.THEME_MAP.map(function(t,n){return d.default.createElement("a",{key:n,className:"float-left width-100 small"+(g==t.value?" active":""),onClick:e.onThemeChange.bind(null,t.value)},d.default.createElement("i",{className:"fa"+(g==t.value?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),d.default.createElement("span",{className:"less-margin-left"},t.name))}),d.default.createElement("div",{className:"clear"})),d.default.createElement("div",{className:"editor-divider"}),d.default.createElement("div",{className:"medium-margin-left editor-options"},d.default.createElement("p",{className:"smaller weight-600 no-margin"},E.editorThemeHeader),d.default.createElement("a",{className:"float-left width-100 small"+(p?"":" active"),onClick:this.onChangeKeybindingsForNormal},d.default.createElement("i",{className:"fa"+(p?" fa-circle-o":" fa-dot-circle-o"),"aria-hidden":"true"}),d.default.createElement("span",{className:"less-margin-left"},E.keybindingNormal)),d.default.createElement("a",{className:"float-left width-100 small"+("vim"==p?" active":""),onClick:this.onChangeKeybindingsForVim},d.default.createElement("i",{className:"fa"+("vim"==p?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),d.default.createElement("span",{className:"less-margin-left"},E.keybindingVim)),d.default.createElement("a",{className:"float-left width-100 small"+("emacs"==p?" active":""),onClick:this.onChangeKeybindingsForEmacs},d.default.createElement("i",{className:"fa"+("emacs"==p?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),d.default.createElement("span",{className:"less-margin-left"},E.keybindingEmacs)),d.default.createElement("div",{className:"clear"})),d.default.createElement("div",{className:"editor-divider"}),O,T))),d.default.createElement("a",{id:"confirm-set-favorite-code",className:"show-modal hidden",target:"confirm-set-favorite-code-modal",ref:"confirm_set_favorite_code"}),d.default.createElement("div",{id:"confirm-set-favorite-code-modal",className:"modal-window small-modal"},d.default.createElement("div",{className:"modal-header"},E.updateDefaultTemplate),d.default.createElement("div",{className:"modal-content"},d.default.createElement("div",{className:"dark regular"},E.overWriteExistingTemplate)),d.default.createElement("div",{className:"modal-footer"},d.default.createElement("a",{href:"#",className:"link-3 float-left close-modal-window link-near-button"},E.takeMeBack),d.default.createElement("a",{className:"float-right button btn-blue close-modal-window set-favorite-code",id:"set-favorite-code",onClick:this.set_default_template.bind(this)},E.yes),d.default.createElement("div",{className:"clear"}))),d.default.createElement("a",{className:"go-full-screen editor-settings-button float-right less-margin-left",title:N,onClick:this.handleFullScreenClick},d.default.createElement("i",{className:I})),d.default.createElement("select",{id:L,className:"editor-lang-select nice-select",value:l||"lang",onChange:this.onLangChange},s?n.map(function(e){return d.default.createElement("option",{value:e.id,key:e.id},e.versioned_name)}):[d.default.createElement("option",{value:"lang",key:"lang"},E.selectLanguage)]),d.default.createElement("a",{id:D,className:"editor-save-trigger float-right regular",ref:"saveLink",onClick:this.onClickOnSave},E.save)),d.default.createElement(m.AceEditor,{mode:l?f.LANG_MODE_MAP[l]:"",theme:g,name:"code-ace-editor",ref:"ace_editor",keyboardHandler:this.getCurrentKeybindings(),sessionId:c,value:s?k:E.loading+"...",onChange:this.onSourceChange,commands:this.aceCommands,width:"100%",showPrintMargin:!1,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!!a,completer:l?(0,C.getCompleter)(l):null,tabSize:4,fontSize:15,showGutter:!0,readOnly:!s,onCut:this.onCut,onCopy:this.onCopy,onPaste:this.onPaste,onEditorCreation:this.onEditorCreation,onDocumentCreation:this.onDocumentCreation,onSessionCreation:this.onSessionCreation,keyboardHandlerFunction:this.keyboardHandlerFunction,minLines:this.props.editor_min_lines||25,maxLines:this.props.editor_max_lines||40,onCursorChange:this.onCursorChange,onVimModeChange:this.onVimModeChange}),d.default.createElement("div",{className:"cursor-position light"},_.row+1,":",_.col+1),p?d.default.createElement("div",{className:"keybindings-text"},d.default.createElement("span",null,p+y)):null)}}]),t}(d.default.PureComponent);t.CodeEditor=(0,p.connect)(function(e,t){var n=t.p_type,o=t.problem_id,r=(0,v.getRoot)(n,o);return{global_conf:e.code_editor.global_conf,root:r,root_data:e.code_editor.roots[r]}})(T)},XGVg:function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){switch(t.type){case s.ActionType.INIT_SUB_EDITOR:var n=t.root;return i({},e,r({},n,{show_input:!1,input_text:"",current_other_bot_user_id:-1,other_bot_users:[{id:-1,name:l.defaultBot}],fetching_response:!1,log_response:null,sub_response:null}));case s.ActionType.SUB_EDITOR_SWAP_SHOW_INPUT:var a=t.root;return i({},e,r({},a,i({},e[a],{show_input:!e[a].show_input})));case s.ActionType.SUB_EDITOR_CUTSOM_INPUT_CHANGE:var u=t.root,c=t.value;return i({},e,r({},u,i({},e[u],{input_text:c})));case s.ActionType.SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE:var d=t.root,p=t.user_id;return i({},e,r({},d,i({},e[d],{current_other_bot_user_id:p})));case s.ActionType.SUB_EDITOR_OTHER_BOT_USERS_UPDATE:var _=t.root,h=t.other_bot_users;return i({},e,r({},_,i({},e[_],{other_bot_users:[{id:-1,name:l.defaultBot}].concat(o(h))})));case s.ActionType.SUB_EDITOR_FETCH_RESPONSE:var f=t.root,m=t.is_log;return i({},e,r({},f,i({},e[f],{show_input:!!m&&e[f].show_input,fetching_response:!0,log_response:null,sub_response:null})));case s.ActionType.SUB_EDITOR_FETCH_RESPONSE_SUCCESS:var g=t.root,v=t.html,y=t.is_log;return i({},e,r({},g,i({},e[g],{fetching_response:!1,log_response:y?v:e[g].log_response,sub_response:y?e[g].sub_response:v})))}return e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=a;var s=n("r6Ka"),l=window.CodeEditorText},a80F:function(e,t,n){"use strict";n("V+73"),n("2qnb"),n("xCI4"),n("QoCx"),n("1z0e"),n("GEW4"),n("7voC"),n("EzsT"),n("mMMU"),n("hCU/"),n("33AR"),n("h636"),n("DPpf"),n("Wv+O"),n("y1CR"),n("EFXh"),n("0T25"),n("UBkM"),n("ek6K"),n("2i/5"),n("BR1z"),n("zfZq"),n("7H3A"),n("OQLN"),n("xf9h"),n("orD9"),n("Ejne"),n("p4x1"),n("1w4w"),n("fGMu"),n("lqDo"),n("78pI")},bInE:function(e,t,n){"use strict";function o(e){if(localStorage){var t=localStorage.getItem(e);if(null!==t&&"undefined"!==t){return JSON.parse(t)}}return null}function r(e,t){if(localStorage){var n=JSON.stringify(t);return localStorage.setItem(e,n),!0}return!1}function a(e){return!!localStorage&&(localStorage.removeItem(e),!0)}function i(e,t){var n=e.private_url_hash,r=e.is_authenticated,i=g(n,"","lang"),s=o(i);if(s)return r&&a(i),s;if(e.last_lang)return e.last_lang;for(var l=null,u=0;u<e.langs_info.length;u++){var c=e.langs_info[u].id,d=e.lang_source_map[c].last_edited;d&&(null===l||d>l)&&(l=d,s=c)}return s||(t.fav_lang&&h(t.fav_lang,e.langs_info)?t.fav_lang:e.langs_info.length>0?e.langs_info[0].id:null)}function s(e,t){return e+"-"+t}function l(){return o("keybindings")?o("keybindings"):null}function u(e,t){return s(e.p_type,e.problem_id)+"-"+t}function c(e){return e.lang_source_map[e.current_lang]}function d(e,t){for(var n="",o=e.split("\n"),r=!1,a=null,i=0,s=0;s<o.length;s++){var l=o[s];if(/^<readonly>/.test(l))r=!0,a=i;else if(/^<\/readonly>/.test(l)&&r){var u=new T(a,0,i,0);t.push(u),r=!1}else n+=l,s!=o.length-1&&(n+="\n"),i+=1}return n=n.replace(/\r/g,"")}function p(e,t){for(var n="",o={},r=0;r<t.length;r++)o[t[r].start.row]="start",o[t[r].end.row]="end";for(var a=e.split("\n"),i=0;i<a.length;i++){var s=a[i];i in o&&("start"==o[i]?n+="<readonly>\n":(n+="</readonly>",i==a.length-1&&/^\r?$/.test(s)||(n+="\n"))),n+=s,i!=a.length-1&&(n+="\n")}return n}function _(e){return e.map(function(e){return e.clone()})}function h(e,t){return t.some(function(t){return t.id==e})}function f(e){var t=e.split(".");return t.length>1?t.pop():null}function m(e){var t=f(e);return t&&t in E.EXTENSION_TO_LANG_MAP?E.EXTENSION_TO_LANG_MAP[t]:null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o="";return"delta"==n?o=e+"_delta_"+t:"source"==n?o=e+"_"+t:"lang"==n&&(o=e+"_last_lang"),o}function v(){return jQuery("#login-modal").show(),jQuery("#login-modal").modal({onClose:function(e){e.data.fadeOut(300),e.container.fadeOut(300,function(){e.overlay.hide(),jQuery.modal.close(),jQuery(".modal-window").hide()})},onOpen:function(e){e.overlay.fadeIn(300),e.data.show(),e.container.fadeIn(300)}}),!1}function y(){var e=o(E.CODE_EDITOR_THEME_TOKEN),t=!1;return e&&(t=E.THEME_MAP.some(function(t){return t.value===e})),t?e:null}Object.defineProperty(t,"__esModule",{value:!0}),t.get_from_local_storage=o,t.set_to_local_storage=r,t.remove_from_local_storage=a,t.get_last_lang=i,t.getRoot=s,t.get_last_keybindings=l,t.getSessionId=u,t.getSourceData=c,t.get_source_and_readonly_ranges=d,t.applyReadonlyRangesToSource=p,t.cloneReadonlyRanges=_,t.isLangAllowed=h,t.getExtension=f,t.getLangForFilePath=m,t.getKey=g,t.showLoginModal=v,t.get_last_code_editor_theme=y;var b=n("kX7f"),C=function(e){return e&&e.__esModule?e:{default:e}}(b),E=n("yUpC"),S=C.default.acequire("ace/range"),T=S.Range;window.get_source_and_readonly_ranges=d,window.applyReadonlyRangesToSource=p},cuEl:function(e,t,n){"use strict";function o(e){return C[e]||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getCompleter=o;var r=n("1hYb"),a=n("DX2b"),i=n("UqqS"),s=n("DV9t"),l=n("WPdo"),u=n("hWNS"),c=n("RbMe"),d=n("Hg6N"),p=n("FHh8"),_=n("23X7"),h=n("pf4S"),f=n("BeQ+"),m=n("acbj"),g=n("LMZ2"),v=n("U8Sy"),y=n("ITpG"),b=n("HeRc"),C={C:r.c_completer,CPP:i.cpp_completer,CPP11:i.cpp_completer,CPP14:i.cpp_completer,PYTHON:m.python_completer,PERL:h.perl_completer,PASCAL:_.pascal_completer,JAVA:c.java_completer,JAVA8:c.java_completer,RUBY:v.ruby_completer,GO:l.go_completer,PHP:f.php_completer,CSHARP:s.csharp_completer,LISP:d.lisp_completer,R:g.r_completer,RUST:y.rust_completer,HASKELL:u.haskell_completer,SCALA:b.scala_completer,OBJECTIVEC:p.objectivec_completer,CLOJURE:a.clojure_completer}},d6GN:function(e,t,n){"use strict";function o(e){var t=jQuery("<div/>").html(e),n=t.find("[replaceData=true]");return!(t.find("[replaceData=false]").length>0&&0===n.length||(n.length,0))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldPoll=o},ncZi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.ActionType=void 0;var o=n("vMAF"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=t.ActionType=(0,r.default)({INIT_CODE_EDITOR:null,SET_SOURCE_IN_CODE_EDITOR:null,CHANGE_SOURCE_IN_CODE_EDITOR:null,CHANGE_CURRENT_LANG_IN_CODE_EDITOR:null,CHANGE_CURRENT_KEYBINDINGS:null,CHANGE_FAVORITE_LANG_IN_CODE_EDITOR:null,SET_CURSOR_POSITION:null,CHANGE_FULL_SCREEN_MODE:null,CHANGE_CURRENT_THEME_IN_CODE_EDITOR:null});t.actions={initCodeEditor:function(e,t){return{type:a.INIT_CODE_EDITOR,root:e,data:t}},setSourceInCodeEditor:function(e,t,n){return{type:a.SET_SOURCE_IN_CODE_EDITOR,root:e,data:t,animate_save:n}},changeSourceInCodeEditor:function(e,t,n){return{type:a.CHANGE_SOURCE_IN_CODE_EDITOR,root:e,source:t,delta:n}},changeCurrentLangInCodeEditor:function(e,t){return{type:a.CHANGE_CURRENT_LANG_IN_CODE_EDITOR,root:e,lang:t}},changeCurrentKeybindings:function(e,t){return{type:a.CHANGE_CURRENT_KEYBINDINGS,root:e,keybindings:t}},changeFavoriteLang:function(e,t){return{type:a.CHANGE_FAVORITE_LANG_IN_CODE_EDITOR,root:e,fav_lang:t}},setCursorPosition:function(e,t,n){return{type:a.SET_CURSOR_POSITION,root:e,row:t,col:n}},toggleFullScreenMode:function(e,t){return{type:a.CHANGE_FULL_SCREEN_MODE,root:e,is_full_screen:t}},changeCurrentThemeInCodeEditor:function(e,t){return{type:a.CHANGE_CURRENT_THEME_IN_CODE_EDITOR,root:e,code_editor_theme:t}}}},r6Ka:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.ActionType=void 0;var o=n("vMAF"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=t.ActionType=(0,r.default)({INIT_SUB_EDITOR:null,SUB_EDITOR_SWAP_SHOW_INPUT:null,SUB_EDITOR_CUTSOM_INPUT_CHANGE:null,SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE:null,SUB_EDITOR_OTHER_BOT_USERS_UPDATE:null,SUB_EDITOR_FETCH_RESPONSE:null,SUB_EDITOR_FETCH_RESPONSE_SUCCESS:null});t.actions={initSubEditor:function(e){return{type:a.INIT_SUB_EDITOR,root:e}},swapShowInput:function(e){return{type:a.SUB_EDITOR_SWAP_SHOW_INPUT,root:e}},customInputChange:function(e,t){return{type:a.SUB_EDITOR_CUTSOM_INPUT_CHANGE,root:e,value:t}},otherBotUserIdChange:function(e,t){return{type:a.SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE,root:e,user_id:t}},updateOtherBotUsers:function(e,t){return{type:a.SUB_EDITOR_OTHER_BOT_USERS_UPDATE,root:e,other_bot_users:t}},fetchResponse:function(e,t){return{type:a.SUB_EDITOR_FETCH_RESPONSE,root:e,is_log:t}},fetchResponseSuccess:function(e,t,n){return{type:a.SUB_EDITOR_FETCH_RESPONSE_SUCCESS,root:e,html:t,is_log:n}}}},s0pV:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return e*Math.pow(2,t)}function l(e,t){var n=2147483648;return(~~(e/n)&~~(t/n))*n+(2147483647&e&t)}function u(e,t){var n=2147483648;return(~~(e/n)|~~(t/n))*n+(2147483647&e|2147483647&t)}function c(e,t,n,o){if(e in window.editorSessions)return o.created=!1,window.editorSessions[e];var r=f.default.createEditSession(t(),n?"ace/mode/"+n:void 0);return window.editorSessions[e]=r,o.created=!0,r}function d(e,t,n){var o=e[t];return e[t]=function(){var t=Array.prototype.slice.call(arguments);return n.call(this,function(){return o.apply(e,t)},t)},e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.AceEditor=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=n("kX7f"),f=o(h);n("R3yc");var m=n("U7vG"),g=o(m),v=n("2iM5"),y=o(v),b=f.default.acequire("ace/range"),C=b.Range,E=f.default.acequire("ace/keyboard/hash_handler"),S=E.HashHandler,T=f.default.acequire("ace/document"),O=T.Document,P=f.default.acequire("ace/keyboard/keybinding"),k=P.KeyBinding,w=f.default.acequire("ace/ext/language_tools"),R=w.addCompleter,I=f.default.acequire("ace/autocomplete/util"),N=f.default.acequire("ace/autocomplete"),A=f.default.acequire("ace/virtual_renderer").VirtualRenderer,L=f.default.acequire("ace/editor").Editor,D=f.default.acequire("ace/lib/event"),M=f.default.acequire("ace/lib/lang"),x=f.default.acequire("ace/lib/dom");k.prototype.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,t.length)}};I.retrievePrecedingIdentifier=function(e,t,n){n=n||/[a-zA-Z_0-9\.\$\-\u00A2-\uFFFF]/;for(var o=[],r=t-1;r>=0&&n.test(e[r]);r--)o.push(e[r]);return o.reverse().join("")},N.FilteredList.prototype.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else var t=this.all;this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var n;try{n=new RegExp(this.filterText)}catch(e){}var o=null;t=t.filter(function(e){var t=e.snippet||e.caption||e.value;return t!==o&&(o=t,n&&n.test(e.value)&&!0)}),this.filtered=t},N.FilteredList.prototype.filterCompletions=function(e,t){var n=[];e:for(var o,r=0;o=e[r];r++){var a=o.value||o.caption||o.snippet;if(a){var i,l,c=-1,d=0,p=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else{i=a.indexOf(t);for(var _=0;_<t.length;_++){if(i<0)continue e;l=i-c-1,l>0&&(-1===c&&(p+=10),p+=l),d=u(d,s(1,i)),c=i++}}o.matchMask=d,o.exactMatch=p?0:1,o.score=(o.score||0)-p,n.push(o)}}return n},N.Autocomplete.prototype.$init=function(){return this.popup=new H(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup};var U=function(e){var t=new A(e);t.$maxLines=4;var n=new L(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusWaitTimout=0,n.$highlightTagPending=!0,n},H=function(e){var t=x.createElement("div"),n=new U(t);e&&e.appendChild(t),t.style.display="none",n.renderer.content.style.cursor="default",n.renderer.setStyle("ace_autocomplete"),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150);var o=function(){};n.focus=o,n.$isFocused=!0,n.renderer.$cursorLayer.restartTimer=o,n.renderer.$cursorLayer.element.style.opacity=0,n.renderer.$maxLines=8,n.renderer.$keepTextAreaAtCursor=!1,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n.on("mousedown",function(e){var t=e.getDocumentPosition();n.selection.moveToPosition(t),i.start.row=i.end.row=t.row,e.stop()});var r,a=new C(-1,0,-1,1/0),i=new C(-1,0,-1,1/0);i.id=n.session.addMarker(i,"ace_active-line","fullLine"),n.setSelectOnHover=function(e){e?a.id&&(n.session.removeMarker(a.id),a.id=null):a.id=n.session.addMarker(a,"ace_line-hover","fullLine")},n.setSelectOnHover(!1),n.on("mousemove",function(e){if(!r)return void(r=e);if(r.x!=e.x||r.y!=e.y){r=e,r.scrollTop=n.renderer.scrollTop;var t=r.getDocumentPosition().row;a.start.row!=t&&(a.id||n.setRow(t),c(t))}}),n.renderer.on("beforeRender",function(){if(r&&-1!=a.start.row){r.$pos=null;var e=r.getDocumentPosition().row;a.id||n.setRow(e),c(e,!0)}}),n.renderer.on("afterRender",function(){var e=n.getRow(),t=n.renderer.$textLayer,o=t.element.childNodes[e-t.config.firstRow];o!=t.selectedNode&&(t.selectedNode&&x.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=o,o&&x.addCssClass(o,"ace_selected"))});var u=function(){c(-1)},c=function(e,t){e!==a.start.row&&(a.start.row=a.end.row=e,t||n.session._emit("changeBackMarker"),n._emit("changeHoverMarker"))};n.getHoveredRow=function(){return a.start.row},D.addListener(n.container,"mouseout",u),n.on("hide",u),n.on("changeSelection",u),n.session.doc.getLength=function(){return n.data.length},n.session.doc.getLine=function(e){var t=n.data[e];return"string"==typeof t?t:t&&t.value||""};var d=n.session.bgTokenizer;return d.$tokenizeRow=function(e){var t=n.data[e],o=[];if(!t)return o;"string"==typeof t&&(t={value:t}),t.caption||(t.caption=t.value||t.name);for(var r,a,i=-1,u=0;u<t.caption.length;u++)a=t.caption[u],r=l(t.matchMask,s(1,u))?1:0,i!==r?(o.push({type:t.className||(r?"completion-highlight":""),value:a}),i=r):o[o.length-1].value+=a;if(t.meta){var c=n.renderer.$size.scrollerWidth/n.renderer.layerConfig.characterWidth,d=t.meta;d.length+t.caption.length>c-2&&(d=d.substr(0,c-t.caption.length-3)+""),o.push({type:"rightAlignedText",value:d})}return o},d.$updateOnChange=o,d.start=o,n.session.$computeWidth=function(){return this.screenWidth=0},n.$blockScrolling=1/0,n.isOpen=!1,n.isTopdown=!1,n.data=[],n.setData=function(e){n.setValue(M.stringRepeat("\n",e.length),-1),n.data=e||[],n.setRow(0)},n.getData=function(e){return n.data[e]},n.getRow=function(){return i.start.row},n.setRow=function(e){e=Math.max(0,Math.min(this.data.length,e)),i.start.row!=e&&(n.selection.clearSelection(),i.start.row=i.end.row=e||0,n.session._emit("changeBackMarker"),n.moveCursorTo(e||0,0),n.isOpen&&n._signal("select"))},n.on("changeSelection",function(){n.isOpen&&n.setRow(n.selection.lead.row),n.renderer.scrollCursorIntoView()}),n.hide=function(){this.container.style.display="none",this._signal("hide"),n.isOpen=!1},n.show=function(e,t,o){var a=this.container,i=window.innerHeight,s=window.innerWidth,l=this.renderer,u=l.$maxLines*t*1.4,c=e.top+this.$borderSize;c>i/2&&!o&&c+t+u>i?(l.$maxPixelHeight=c-2*this.$borderSize,a.style.top="",a.style.bottom=i-c+"px",n.isTopdown=!1):(c+=t,l.$maxPixelHeight=i-c-.2*t,a.style.top=c+"px",a.style.bottom="",n.isTopdown=!0),a.style.display="",this.renderer.$textLayer.checkForSizeChanges();var d=e.left;d+a.offsetWidth>s&&(d=s-a.offsetWidth),a.style.left=d+"px",this._signal("show"),r=null,n.isOpen=!0},n.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},n.$imageSize=0,n.$borderSize=1,n};window.editorSessions={};var j=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"],F=t.AceEditor=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["onChange","onFocus","onBlur","onCut","onCopy","onPaste","onScroll","handleOptions","onCursorChange","onVimModeChange"].forEach(function(e){n[e]=n[e].bind(n)}),n.getSelectionRange=function(){return n.editor.getSelectionRange()},n.focus=function(){n.editor.focus()},n.setValue=function(e){n.editor.setValue(e),n.editor.session.selection.moveCursorFileStart(),n.editor.focus()},n}return i(t,e),_(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.className,o=t.onBeforeLoad,r=t.mode,a=t.focus,i=t.theme,s=t.fontSize,l=t.sessionId,u=t.value,p=t.cursorStart,_=t.showGutter,h=t.wrapEnabled,m=t.showPrintMargin,g=t.keyboardHandler,v=t.onLoad,y=t.commands,b=t.annotations,C=t.markers;this.editor=f.default.edit(this.refs.editor),this.editor.$blockScrolling=1/0;var E=new S;if(E.handleKeyboard=function(t,n,o,r,a){if(e.props.keyboardHandlerFunction)return e.props.keyboardHandlerFunction(t,n,o,r,a)},this.editor.keyBinding.addKeyboardHandler(E,0),this.props.onEditorCreation&&this.props.onEditorCreation(this.editor),l){var T={},O=c(l,this.createNewDocument.bind(this,l,u),r,T);this.editor.setSession(O),T.created&&this.props.onSessionCreation&&this.props.onSessionCreation(this.props.sessionId,this.editor.getSession())}o&&o(f.default);for(var P=Object.keys(this.props.editorProps),k=0;k<P.length;k++)this.editor[P[k]]=this.props.editorProps[P[k]];l||this.editor.getSession().setMode("ace/mode/"+r),this.editor.setTheme("ace/theme/"+i),this.editor.setFontSize(s),l||this.editor.setValue(u,p),this.editor.renderer.setShowGutter(_),this.editor.getSession().setUseWrapMode(h),this.editor.setShowPrintMargin(m),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),d(this.editor,"onCut",this.onCut),d(this.editor,"onCopy",this.onCopy),d(this.editor,"onPaste",this.onPaste),d(this.editor,"onCursorChange",this.onCursorChange),this.editor.on("change",this.onChange),this.editor.session.on("changeScrollTop",this.onScroll),this.handleOptions(this.props),this.editor.getSession().setAnnotations(b||[]),this.handleMarkers(C||[]),this.props.completer&&R(this.props.completer);for(var w=this.editor.$options,I=0;I<j.length;I++){var N=j[I];w.hasOwnProperty(N)&&this.editor.setOption(N,this.props[N])}Array.isArray(y)&&y.forEach(function(t){e.editor.commands.addCommand(t)}),g&&(this.editor.setKeyboardHandler("ace/keyboard/"+g),"vim"==g&&this.editor.state.cm.on("vim-mode-change",this.onVimModeChange)),n&&(this.refs.editor.className+=" "+n),a&&this.editor.focus(),v&&v(this.editor)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;if(e.sessionId!=t.sessionId){var n={},o=c(e.sessionId,this.createNewDocument.bind(this,e.sessionId,e.value),e.mode,n);this.editor.setSession(o),this.editor.focus(),n.created&&this.props.onSessionCreation&&this.props.onSessionCreation(e.sessionId,this.editor.getSession())}for(var r=0;r<j.length;r++){var a=j[r];e[a]!==t[a]&&this.editor.setOption(a,e[a])}if(e.className!==t.className){var i=this.refs.editor.className,s=i.trim().split(" ");t.className.trim().split(" ").forEach(function(e){var t=s.indexOf(e);s.splice(t,1)}),this.refs.editor.className=" "+e.className+" "+s.join(" ")}if(e.theme!==t.theme&&this.editor.setTheme("ace/theme/"+e.theme),e.keyboardHandler!==t.keyboardHandler&&(this.editor.setKeyboardHandler(e.keyboardHandler?"ace/keyboard/"+e.keyboardHandler:null),"vim"==e.keyboardHandler&&this.editor.state.cm.on("vim-mode-change",this.onVimModeChange)),e.fontSize!==t.fontSize&&this.editor.setFontSize(e.fontSize),e.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(e.wrapEnabled),e.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(e.showPrintMargin),e.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(e.showGutter),(0,y.default)(e.setOptions,t.setOptions)||this.handleOptions(e),(0,y.default)(e.annotations,t.annotations)||this.editor.getSession().setAnnotations(e.annotations||[]),(0,y.default)(e.markers,t.markers)||this.handleMarkers(e.markers||[]),this.editor&&this.editor.getValue()!==e.value){this.silent=!0;var l=this.editor.session.selection.toJSON();this.editor.setValue(e.value,e.cursorStart),this.editor.session.selection.fromJSON(l),this.silent=!1}e.focus&&!t.focus&&this.editor.focus(),e.height!==this.props.height&&this.editor.resize(),e.completer&&e.completer!=t.completer&&R(e.completer)}},{key:"componentWillUnmount",value:function(){this.editor.setSession(null),this.editor.destroy(),this.editor=null}},{key:"createNewDocument",value:function(e,t){var n=new O(t);return this.props.onDocumentCreation&&this.props.onDocumentCreation(e,n),n}},{key:"onChange",value:function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}}},{key:"onFocus",value:function(){this.props.onFocus&&this.props.onFocus()}},{key:"onBlur",value:function(){this.props.onBlur&&this.props.onBlur()}},{key:"onCut",value:function(e,t){if(this.props.onCut){!0===this.props.onCut(t[0])&&e()}else e()}},{key:"onCopy",value:function(e,t){if(this.props.onCopy){!0===this.props.onCopy(t[0])&&e()}else e()}},{key:"onPaste",value:function(e,t){if(this.props.onPaste){!0===this.props.onPaste(t[0])&&e()}else e()}},{key:"onCursorChange",value:function(e){if(e(),this.props.onCursorChange){var t=this.editor.getCursorPosition(),n=t.row,o=t.column;this.props.onCursorChange(n,o)}}},{key:"onVimModeChange",value:function(e){this.props.onVimModeChange&&this.props.onVimModeChange(e.mode)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(e){for(var t=Object.keys(e.setOptions),n=0;n<t.length;n++)this.editor.setOption(t[n],e.setOptions[t[n]])}},{key:"handleMarkers",value:function(e){var t=this,n=this.editor.getSession().getMarkers(!0);for(var o in n)n.hasOwnProperty(o)&&this.editor.getSession().removeMarker(n[o].id);n=this.editor.getSession().getMarkers(!1);for(var r in n)n.hasOwnProperty(r)&&this.editor.getSession().removeMarker(n[r].id);e.forEach(function(e){var n=e.startRow,o=e.startCol,r=e.endRow,a=e.endCol,i=e.className,s=e.type,l=e.inFront,u=void 0!==l&&l,c=new C(n,o,r,a);t.editor.getSession().addMarker(c,i,s,u)})}},{key:"isVimInInsertMode",value:function(){return!(!this.editor.state||!this.editor.state.cm.state.vim.insertMode)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.width,o=e.height,r=e.style,a=p({width:n,height:o},r);return g.default.createElement("div",{ref:"editor",id:t,style:a})}}]),t}(m.PureComponent);F.propTypes={mode:m.PropTypes.string,focus:m.PropTypes.bool,theme:m.PropTypes.string,name:m.PropTypes.string,sessionId:m.PropTypes.string,className:m.PropTypes.string,height:m.PropTypes.string,width:m.PropTypes.string,fontSize:m.PropTypes.number,showGutter:m.PropTypes.bool,onChange:m.PropTypes.func,onCut:m.PropTypes.func,onCopy:m.PropTypes.func,onPaste:m.PropTypes.func,onFocus:m.PropTypes.func,onBlur:m.PropTypes.func,onScroll:m.PropTypes.func,value:m.PropTypes.string,onLoad:m.PropTypes.func,onCursorChange:m.PropTypes.func,onBeforeLoad:m.PropTypes.func,minLines:m.PropTypes.number,maxLines:m.PropTypes.number,readOnly:m.PropTypes.bool,highlightActiveLine:m.PropTypes.bool,tabSize:m.PropTypes.number,showPrintMargin:m.PropTypes.bool,cursorStart:m.PropTypes.number,editorProps:m.PropTypes.object,setOptions:m.PropTypes.object,annotations:m.PropTypes.array,markers:m.PropTypes.array,keyboardHandler:m.PropTypes.string,wrapEnabled:m.PropTypes.bool,enableBasicAutocompletion:m.PropTypes.oneOfType([m.PropTypes.bool,m.PropTypes.array]),enableLiveAutocompletion:m.PropTypes.oneOfType([m.PropTypes.bool,m.PropTypes.array]),commands:m.PropTypes.array,onEditorCreation:m.PropTypes.func,onSessionCreation:m.PropTypes.func,onDocumentCreation:m.PropTypes.func,keyboardHandlerFunction:m.PropTypes.func,completer:m.PropTypes.object,onVimModeChange:m.PropTypes.func},F.defaultProps={name:"brace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,onEditorCreation:null,onSessionCreation:null,onDocumentCreation:null,keyboardHandlerFunction:null,completer:null,onVimModeChange:null}},yUpC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LANG_MODE_MAP={C:"c_cpp",CPP:"c_cpp",CPP11:"c_cpp",CPP14:"c_cpp",PYTHON:"python",PYTHON3:"python",PERL:"perl",PASCAL:"pascal",JAVA:"java",JAVA8:"java",RUBY:"ruby",GO:"golang",PHP:"php",CSHARP:"csharp",FSHARP:"csharp",HTML:"html",CSS:"css",JAVASCRIPT:"javascript",JAVASCRIPT_UI:"javascript",JAVASCRIPT_NODE:"javascript",HASKELL:"haskell",CLOJURE:"clojure",SCALA:"scala",TEXTFILE:"html",BEFUNGE:"c_cpp",LOLCODE:"c_cpp",WHENEVER:"c_cpp",OBJECTIVEC:"objectivec",LISP:"lisp",RACKET:"lisp",LISP_SBCL:"lisp",R:"r",RUST:"rust",MYSQL:"mysql",POSTGRESQL:"pgsql",MSSQL:"sqlserver",LUA:"lua",GROOVY:"groovy",D:"d",ERLANG:"erlang",JULIA:"julia",OCAML:"ocaml",OCTAVE:"matlab",SWIFT:"swift",ORACLE:"sql",KOTLIN:"kotlin"},t.EXTENSION_TO_LANG_MAP={bf:"BEFUNGE",c:"C",clj:"CLOJURE",cpp:"CPP",cpp11:"CPP11",cpp14:"CPP14",cs:"CSHARP",css:"CSS",d:"D",erl:"ERLANG",fs:"FSHARP",go:"GO",groovy:"GROOVY",hs:"HASKELL",html:"HTML",java:"JAVA",java8:"JAVA8",jl:"JULIA",js:"JAVASCRIPT",kt:"KOTLIN",kts:"KOTLIN",lisp:"LISP_SBCL",lol:"LOLCODE",lua:"LUA",m:"OBJECTIVEC",ml:"OCAML",mssql:"MSSQL",njs:"JAVASCRIPT_NODE",oct:"OCTAVE",pas:"PASCAL",php:"PHP",pl:"PERL",psql:"POSTGRESQL",py:"PYTHON",py3:"PYTHON3",r:"R",rb:"RUBY",rkt:"RACKET",rs:"RUST",scala:"SCALA",scm:"LISP",sql:"MYSQL",swift:"SWIFT",teen:"WHENEVER",txt:"TEXTFILE",vb:"VB",oracle:"ORACLE"},t.THEME_MAP=[{name:CodeEditorText.lightTheme,value:"crimson_editor",type:"light"},{name:CodeEditorText.darkTheme,value:"monokai",type:"dark"}],t.DEFAULT_CODE_EDITOR_THEME="crimson_editor",t.CODE_EDITOR_THEME_TOKEN="code_editor_theme_token"},yqcu:function(e,t,n){"use strict";function o(e,t){return void 0===t&&(t={}),e in r?(t.created=!1,r[e]):(r[e]=[],t.created=!0,r[e])}Object.defineProperty(t,"__esModule",{value:!0}),t.getOrCreateReadonlyRanges=o,window.SessionIdReadonlyRangesMap={};var r=window.SessionIdReadonlyRangesMap},zp53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={sub_editors:{}}}},["H2Zf"]);